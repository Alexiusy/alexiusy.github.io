<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="è·å–çš„å­—ç¬¦ä¸²é•¿åº¦ä¸ä¸€æ ·ï¼Ÿåœ¨ Swift ä¸­è·å–å­—ç¬¦ä¸²çš„é•¿åº¦å¾ˆç®€å•ï¼Œåªéœ€è¦è°ƒç”¨ count å±æ€§å³å¯ã€‚ 123let string &#x3D; &quot;è¿™æ˜¯ğŸ˜ï¼Œå®ƒçš„ğŸ‘ƒå¾ˆé•¿&quot;print(&quot;string çš„é•¿åº¦ä¸ºï¼š \(string.count)&quot;)&#x2F;&#x2F; è¾“å‡º: &quot;string çš„é•¿åº¦ä¸ºï¼š 9&quot;  è¿™åœ¨æ—¥å¸¸çš„ä½¿ç”¨ä¸­æ˜¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜çš„ï¼Œç›´åˆ°æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°äº†ä¸€">
<meta property="og:type" content="article">
<meta property="og:title" content="Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜">
<meta property="og:url" content="http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/index.html">
<meta property="og:site_name" content="Alexius&#39;s Utopia">
<meta property="og:description" content="è·å–çš„å­—ç¬¦ä¸²é•¿åº¦ä¸ä¸€æ ·ï¼Ÿåœ¨ Swift ä¸­è·å–å­—ç¬¦ä¸²çš„é•¿åº¦å¾ˆç®€å•ï¼Œåªéœ€è¦è°ƒç”¨ count å±æ€§å³å¯ã€‚ 123let string &#x3D; &quot;è¿™æ˜¯ğŸ˜ï¼Œå®ƒçš„ğŸ‘ƒå¾ˆé•¿&quot;print(&quot;string çš„é•¿åº¦ä¸ºï¼š \(string.count)&quot;)&#x2F;&#x2F; è¾“å‡º: &quot;string çš„é•¿åº¦ä¸ºï¼š 9&quot;  è¿™åœ¨æ—¥å¸¸çš„ä½¿ç”¨ä¸­æ˜¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜çš„ï¼Œç›´åˆ°æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°äº†ä¸€">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-05-14T06:16:03.000Z">
<meta property="article:modified_time" content="2023-06-13T02:42:40.511Z">
<meta property="article:author" content="Alexius">
<meta property="article:tag" content="String">
<meta property="article:tag" content="NSString">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a href="/categories/">åˆ†ç±»</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/alexiusy">é¡¹ç›®</a></li>
         
          <li><a href="/custom/cv.html">å…³äº</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2018/06/03/%E5%87%8F%E5%B0%91%E5%8A%A8%E6%80%81%E6%B4%BE%E5%8F%91%E6%8F%90%E9%AB%98%E6%80%A7%E8%83%BD/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2018/03/15/iOS%20%E7%82%B9%E6%BB%B4%E3%80%90%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%E3%80%91/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&text=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&title=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&is_video=false&description=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜&body=Check out this article: http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&title=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&title=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&title=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&title=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&name=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&t=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6%E4%B8%8D%E4%B8%80%E6%A0%B7%EF%BC%9F"><span class="toc-number">1.</span> <span class="toc-text">è·å–çš„å­—ç¬¦ä¸²é•¿åº¦ä¸ä¸€æ ·ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E8%8B%B1%E6%96%87%E9%99%90%E5%88%B6%E5%AD%97%E6%95%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.</span> <span class="toc-text">ä¸­è‹±æ–‡é™åˆ¶å­—æ•°çš„é—®é¢˜</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Alexius's Utopia</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2018-05-14T06:16:03.000Z" itemprop="datePublished">2018-05-14</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/iOS/">iOS</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/NSString/" rel="tag">NSString</a>, <a class="tag-link-link" href="/tags/String/" rel="tag">String</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h3 id="è·å–çš„å­—ç¬¦ä¸²é•¿åº¦ä¸ä¸€æ ·ï¼Ÿ"><a href="#è·å–çš„å­—ç¬¦ä¸²é•¿åº¦ä¸ä¸€æ ·ï¼Ÿ" class="headerlink" title="è·å–çš„å­—ç¬¦ä¸²é•¿åº¦ä¸ä¸€æ ·ï¼Ÿ"></a>è·å–çš„å­—ç¬¦ä¸²é•¿åº¦ä¸ä¸€æ ·ï¼Ÿ</h3><p>åœ¨ Swift ä¸­è·å–å­—ç¬¦ä¸²çš„é•¿åº¦å¾ˆç®€å•ï¼Œåªéœ€è¦è°ƒç”¨ <code>count</code> å±æ€§å³å¯ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> string <span class="operator">=</span> <span class="string">&quot;è¿™æ˜¯ğŸ˜ï¼Œå®ƒçš„ğŸ‘ƒå¾ˆé•¿&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;string çš„é•¿åº¦ä¸ºï¼š <span class="subst">\(string.count)</span>&quot;</span>)</span><br><span class="line"><span class="comment">// è¾“å‡º: &quot;string çš„é•¿åº¦ä¸ºï¼š 9&quot;</span></span><br></pre></td></tr></table></figure>

<p>è¿™åœ¨æ—¥å¸¸çš„ä½¿ç”¨ä¸­æ˜¯æ²¡æœ‰ä»€ä¹ˆé—®é¢˜çš„ï¼Œç›´åˆ°æˆ‘åœ¨é¡¹ç›®ä¸­é‡åˆ°äº†ä¸€ä¸ªè¯„è®º emoji ä¹±ç çš„é—®é¢˜ã€‚<br>é—®é¢˜è¡¨ç°ä¸ºï¼Œåœ¨è¯„è®ºçš„æœ«å°¾å¦‚æœæ˜¯ emoji çš„è¯ï¼Œ åˆ™ä¼šå˜æˆæ— æ³•æ˜¾ç¤ºçš„â“ï¼Œå¦‚æœ emoji å‡ºç°åœ¨å…¶å®ƒåœ°æ–¹ï¼Œåˆ™å¾ˆå°‘å‡ºç°è¿™ä¸ªæ˜¾ç¤ºä¸äº†çš„é—®é¢˜ã€‚<br>åæ¥ç»è¿‡å¤šæ¬¡çš„ä¸€æ­¥æ­¥è°ƒè¯•ï¼Œç»ˆäºç¡®å®šæ˜¯åœ¨å°†å­—ç¬¦ä¸²è½¬ä¸ºå¯Œæ–‡æœ¬çš„æ—¶å€™å‡ºç°çš„é—®é¢˜ã€‚</p>
<p>å› ä¸ºè¯„è®ºä¸­åŒ…å«é“¾æ¥ï¼Œç”¨æˆ·åï¼Œä»¥åŠè¦è°ƒèŠ‚è¡Œé«˜å’Œå­—é—´è·ç­‰ç­‰ï¼Œæ‰€ä»¥å¿…é¡»è¦ä½¿ç”¨å¯Œæ–‡æœ¬æ¥æ˜¾ç¤ºï¼Œåœ¨æ­¤å¤„ï¼Œå°±ç®€å•åœ°å†™ä¸‹å¤§æ¦‚çš„ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">convertToAttributedString</span>(<span class="params">with</span> <span class="params">string</span>: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> attrString <span class="operator">=</span> <span class="type">NSMutableAttributedString</span>(string: string)</span><br><span class="line">    <span class="keyword">let</span> range <span class="operator">=</span> <span class="type">NSMakeRange</span>(<span class="number">0</span>, string.count) <span class="comment">// 1</span></span><br><span class="line">    attrString.addAttribute(<span class="operator">...</span>, value: <span class="operator">...</span>, range: range)</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">    <span class="keyword">return</span> attrString</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">convertToAttributedString(with: <span class="string">&quot;ä»Šå¤©å¤©æ°”çœŸå¥½å•ŠğŸ˜„&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜å°±å‡ºç°åœ¨æ³¨é‡Š1çš„åœ°æ–¹ï¼Œå…ˆæ¥çœ‹çœ‹ Swift çš„å®˜æ–¹æ–‡æ¡£ã€‚</p>
<blockquote>
<p>Extended grapheme clusters can be composed of multiple Unicode scalars. This means that different charactersâ€”and different representations of the same characterâ€”can require different amounts of memory to store. Because of this, characters in Swift donâ€™t each take up the same amount of memory within a stringâ€™s representation. As a result, the number of characters in a string canâ€™t be calculated without iterating through the string to determine its extended grapheme cluster boundaries. If you are working with particularly long string values, be aware that the count property must iterate over the Unicode scalars in the entire string in order to determine the characters for that string.</p>
<p>The count of the characters returned by the count property isnâ€™t always the same as the length property of an NSString that contains the same characters. The length of an NSString is based on the number of 16-bit code units within the stringâ€™s UTF-16 representation and not the number of Unicode extended grapheme clusters within the string.</p>
</blockquote>
<p>æ„æ€å°±æ˜¯æœ‰ä¸ªä¸œè¥¿å«åš <code>Extended Grapheme Clusters</code>ï¼Œ è€Œè¿™ä¸ª <code>Extended Grapheme Clusters</code> æ˜¯å¯ä»¥ç”±å¤šä¸ª Unicode æ ‡é‡ç»„æˆã€‚å› æ­¤ä¸åŒçš„å­—ç¬¦æˆ–è€…åŒä¸€å­—ç¬¦çš„ä¸åŒè¡¨ç°å½¢å¼å¯èƒ½éœ€è¦ä¸åŒæ•°é‡çš„å†…å­˜æ¥å­˜å‚¨ã€‚è¿™æ ·å°±é€ æˆäº† <code>String</code> çš„ <code>count</code> å±æ€§æ— æ³•å‡†ç¡®è¡¨ç¤ºå®é™…æ‰€å ç”¨çš„å†…å­˜å¤§å°ï¼Œè€Œåªæ˜¯æˆ‘ä»¬è‚‰çœ¼æ‰€èƒ½çœ‹åˆ°çš„å­—ç¬¦é•¿åº¦ã€‚è€Œ <code>NSString</code> ä½¿ç”¨çš„æ˜¯ UTF-16 å­—ç¬¦ç¼–ç æ–¹å¼ï¼Œ<code>length</code> è¡¨ç¤ºçš„æ˜¯16ä½ä»£ç å•å…ƒçš„æ•°é‡è€Œä¸æ˜¯æ‰©å±•å­—ç¬¦é›†çš„æ•°é‡ã€‚</p>
<p>ç°åœ¨å†å›å¤´çœ‹æˆ‘æ‰€é‡åˆ°çš„é—®é¢˜å°±æ¯”è¾ƒæ¸…æ™°æ˜äº†äº†ï¼Œ<code>NSMutableAttributedString</code> ä¸ <code>NSString</code> çš„è¡¨ç°å½¢å¼ä¸€æ ·ä½¿ç”¨ UTF-16ã€‚<br>ä¸Šé¢çš„ä¾‹å­ä¸­ <code>string.count</code> çš„å€¼ä¸º 8ï¼Œè€Œ <code>attrString</code> åœ¨æ·»åŠ å±æ€§çš„æ—¶å€™ï¼ŒæŒ‰ç…§è¿™ä¸ª <code>range</code>ï¼Œå¹¶ä¸èƒ½å®Œæ•´åœ°å°† emoji è½¬ä¸ºå¯Œæ–‡æœ¬ï¼Œå› æ­¤ emoji æ‰ä¼šæ— æ³•æ˜¾ç¤ºã€‚</p>
<p>é‚£ä¹ˆå¦‚ä½•ä¿®æ”¹å‘¢ï¼Œå…¶å®éå¸¸ç®€å•ï¼Œåªè¦åœ¨è®¡ç®— range çš„æ—¶å€™å°† String è½¬ä¸º NSStringï¼Œæˆ–è€…ä½¿ç”¨ UTF-16 çš„æ•°é‡ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">convertToAttributedString</span>(<span class="params">with</span> <span class="params">string</span>: <span class="type">String</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> attrString <span class="operator">=</span> <span class="type">NSMutableAttributedString</span>(string: string)</span><br><span class="line">    <span class="keyword">let</span> range1 <span class="operator">=</span> <span class="type">NSMakeRange</span>(<span class="number">0</span>, <span class="type">NSString</span>(string: string).length)</span><br><span class="line">    <span class="keyword">let</span> range2 <span class="operator">=</span> <span class="type">NSMakeRange</span>(<span class="number">0</span>, string.utf16.count)</span><br><span class="line">    attrString.addAttribute(<span class="operator">...</span>, value: <span class="operator">...</span>, range: range1)</span><br><span class="line">    <span class="operator">...</span></span><br><span class="line">    <span class="keyword">return</span> attrString</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">convertToAttributedString(with: <span class="string">&quot;ä»Šå¤©å¤©æ°”çœŸå¥½å•ŠğŸ˜„&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨ä½¿ç”¨ <code>range1</code> æˆ–è€… <code>range2</code> è½¬æ¢ä¸ºå¯Œæ–‡æœ¬å°±ä¸ä¼šå†å‡ºç°æœ«å°¾ emoji ä¹±ç çš„é—®é¢˜äº†ã€‚</p>
<h3 id="ä¸­è‹±æ–‡é™åˆ¶å­—æ•°çš„é—®é¢˜"><a href="#ä¸­è‹±æ–‡é™åˆ¶å­—æ•°çš„é—®é¢˜" class="headerlink" title="ä¸­è‹±æ–‡é™åˆ¶å­—æ•°çš„é—®é¢˜"></a>ä¸­è‹±æ–‡é™åˆ¶å­—æ•°çš„é—®é¢˜</h3><p>æ—¢ç„¶éƒ½è¯´åˆ°å­—ç¬¦ä¸²é•¿åº¦çš„é—®é¢˜äº†ï¼Œé¡ºä¾¿å†è®¨è®ºä¸‹å¦å¤–ä»¥ä¸€ä¸ªé—®é¢˜ã€‚  </p>
<p>ç›¸ä¿¡åœ¨æ—¥å¸¸çš„å·¥ä½œä¸­ï¼Œæˆ‘ä»¬éƒ½ä¸å…ä¼šé‡åˆ°è¦é™åˆ¶è¾“å…¥å­—æ•°çš„é—®é¢˜ã€‚é€šç”¨çš„åšæ³•éƒ½æ˜¯åœ¨ <code>textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -&gt; Bool</code> ä¸­è®¡ç®— textField.text.count å’Œ string.count ä¹‹å’Œï¼Œå¦‚æœæ•°å­—è¶…è¿‡äº†é™åˆ¶çš„æœ€å¤§å­—æ•°ï¼Œåˆ™è¿”å› falseï¼Œä¸å†å…è®¸ç”¨æˆ·è¾“å…¥ã€‚</p>
<p>è¿™ç§åšæ³•ä¸€èˆ¬æ¥è¯´æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœè€æ¿å‘Šè¯‰ä½ ä¸­æ–‡é™åˆ¶100å­—ï¼Œè‹±æ–‡é™åˆ¶200å­—ï¼Œé‚£ä¹ˆåº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ï¼Œä¸åŒçš„ç¼–ç æ–¹å¼æ˜¯æ€ä¹ˆæ¥å­˜å‚¨å­—ç¬¦çš„ã€‚</p>
<ul>
<li>UTF-8ï¼šä¸€ä¸ªè‹±æ–‡å­—ç¬¦å ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªä¸­æ–‡å ç”¨ä¸‰ä¸ªå­—èŠ‚ã€‚</li>
<li>UTF-16ï¼šä¸€ä¸ªè‹±æ–‡å­—æ¯å­—ç¬¦æˆ–ä¸€ä¸ªæ±‰å­—å­—ç¬¦å­˜å‚¨éƒ½éœ€è¦ 2 ä¸ªå­—èŠ‚ï¼ˆUnicode æ‰©å±•åŒºçš„ä¸€äº›æ±‰å­—å­˜å‚¨éœ€è¦4 ä¸ªå­—èŠ‚ï¼‰</li>
<li>UTF-32ï¼šä½¿ç”¨ 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚</li>
<li>GBKï¼šä¸€ä¸ªè‹±æ–‡å ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªä¸­æ–‡å ç”¨ä¸¤ä¸ªå­—èŠ‚ã€‚</li>
<li>GB2312ï¼šä¸€ä¸ªè‹±æ–‡å ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªä¸­æ–‡å ç”¨ä¸¤ä¸ªå­—èŠ‚ã€‚</li>
</ul>
<p><em><strong>æ­¤å¤„åªæ˜¯ç®€å•åœ°è®¤è¯†ä¸€ä¸‹ä¸åŒç¼–ç æ–¹å¼ä¸‹ä¸­è‹±æ–‡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´å¤§å°ï¼Œæƒ³æ›´æ·±å…¥äº†è§£è¯·æŸ¥è¯¢å­—ç¬¦ç¼–ç ç›¸å…³è¯¦ç»†èµ„æ–™ã€‚</strong></em></p>
<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœä½¿ç”¨GBK ç¼–ç å’Œ GB2312 ç¼–ç ï¼Œé‚£ä¹ˆåªéœ€è¦è®¡ç®—å‡ºæ‰€å ç”¨çš„å­—èŠ‚æ•°ï¼Œ å°±å¯ä»¥å˜ç›¸åœ°è¾¾åˆ°é™åˆ¶ä¸­è‹±æ–‡ä¸åŒå­—æ•°çš„éœ€æ±‚ã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœåœ¨ <code>UITextField</code> çš„ä»£ç†ä¸­é™åˆ¶å­—èŠ‚æ•°ä¸º 20ï¼Œé‚£ä¹ˆå°±åªèƒ½è¾“å…¥ 10 ä¸ªä¸­æ–‡æ–‡å­—æˆ– 20 ä¸ªè‹±æ–‡å­—æ¯æˆ–è€… 5 ä¸ªä¸­æ–‡å’Œ 10 ä¸ªè‹±æ–‡å­—æ¯ã€‚</p>
<p>ä¸‹é¢åˆ™æ˜¯è®¡ç®—æ‰€å ç”¨å­—èŠ‚æ•°çš„è®¡ç®—æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">getBytesCount</span>(<span class="params">of</span> <span class="params">string</span>: <span class="type">String</span>) -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> encoding <span class="operator">=</span> <span class="type">CFStringConvertEncodingToNSStringEncoding</span>(<span class="type">CFStringEncoding</span>(<span class="type">CFStringEncodings</span>.<span class="type">GB_18030_2000</span>.rawValue))</span><br><span class="line">    <span class="keyword">let</span> data <span class="operator">=</span> string.data(using: <span class="type">String</span>.<span class="type">Encoding</span>(rawValue: encoding))<span class="operator">!</span></span><br><span class="line">    <span class="keyword">return</span> data.count</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šå°±æ˜¯é’ˆå¯¹ä¸­è‹±æ–‡é™åˆ¶å­—æ•°ä¸åŒçš„è§£å†³æ–¹æ¡ˆäº†ã€‚</p>
<hr>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://docs.swift.org/swift-book/LanguageGuide/StringsAndCharacters.html">Swift æ–‡æ¡£</a></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a href="/categories/">åˆ†ç±»</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/alexiusy">é¡¹ç›®</a></li>
         
          <li><a href="/custom/cv.html">å…³äº</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6%E4%B8%8D%E4%B8%80%E6%A0%B7%EF%BC%9F"><span class="toc-number">1.</span> <span class="toc-text">è·å–çš„å­—ç¬¦ä¸²é•¿åº¦ä¸ä¸€æ ·ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E8%8B%B1%E6%96%87%E9%99%90%E5%88%B6%E5%AD%97%E6%95%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.</span> <span class="toc-text">ä¸­è‹±æ–‡é™åˆ¶å­—æ•°çš„é—®é¢˜</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&text=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&title=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&is_video=false&description=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜&body=Check out this article: http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&title=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&title=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&title=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&title=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&name=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://yoursite.com/2018/05/14/Swift%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%95%BF%E5%BA%A6%E9%97%AE%E9%A2%98/&t=Swiftå­—ç¬¦ä¸²çš„é•¿åº¦é—®é¢˜"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2014-2023
    Alexius
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a href="/categories/">åˆ†ç±»</a></li>
         
          <li><a target="_blank" rel="noopener" href="https://github.com/alexiusy">é¡¹ç›®</a></li>
         
          <li><a href="/custom/cv.html">å…³äº</a></li>
        
      </ul>
    </nav>
  </div>
  <script async src="https://busuanzi.icodeq.com/busuanzi.pure.mini.js"></script>

  <div>
    æœ¬æ–‡æ€»é˜…è¯»é‡ <span id="busuanzi_value_page_pv"></span> æ¬¡
    æœ¬ç«™æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span> æ¬¡
    æœ¬ç«™æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv"></span> äºº
  </div>

</footer>



    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸ!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
